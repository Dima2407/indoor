@startuml

!include style.skinparam

title Hardware abstraction layer (HAL)



package Utils{

    interface Serializable{
        + deserialize()
        + serialize() : std::vector<char>
    }

    class "Blob : std::vector<char>" as Blob {
        + trimToSize()
    }
}


' Wrap all without traling }
package "namespace Kaa::IndoorSDK::HAL"{

package Camera{
    class Picture{
        timestamp : long double
        GSensorData
        bitmap : Blob
    }

    class GSensorData{
        accelX : double
        accelY
        accelZ
        alpha
        beta
        gamma
    }

    Picture .down.> GSensorData : use
    Picture .down.> Blob : use
}
package Bluetooth{


interface AbstractBeacon {
    + uid : unsigned
    + mac : BleMacAdres
    + hash : unsigned
    + power_tx : double
    + timestamp_tx : long double
    + timestamp_rx : long double
    ____
    + {static}{abstract} deserialize(std::vector<char>) : ThisType
    + {abstract} serialize() : std::vector<char>
    --
    # isBeacon() : bool
}
AbstractBeacon .up.> Blob : use
AbstractBeacon -up-|> Serializable

note left of AbstractBeacon
Inheritors, which adds
non-static fields increases
size of struct in memory.
When copying to a
`std::vector<IBeacon>`
inheritors fields will be lost
endnote

class AltBeacon {
    ---
}

class iBeacon {
    Apple's beacons
    ----
}

class EddystoneUID {
    ----
}

class EddystoneURL {
    + url : std::string;
    ----
    + deserialize()
    + serialize() : std::vector<char>
}

class KaaSignedBeacon {
    putative beacon type
    ----
}

AbstractBeacon <|-- AltBeacon
AbstractBeacon <|--- iBeacon
AbstractBeacon <|-- EddystoneUID
AbstractBeacon <|--- EddystoneURL
AbstractBeacon <|-- KaaSignedBeacon



@enduml
