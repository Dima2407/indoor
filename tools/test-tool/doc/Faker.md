# Faker User Guide

Faker is a program that generates a fake beacon measurements log (RSSI vs timestamp for each beacon)
for a polyline motion (t0, r0), (t1, r1), ... (tn-1, rn-1), where r=(x,y,z). On each of the polyline
segments the motion is uniform. Faker needs for each beacon:
beacon coordinates (x,y,z), beacon data (txPower, damp) and beacon times (how often is the signal generated).
You need at least 3 beacons to get any reasonable results with Tester.

Note: while coordinate z is supported by both Faker and Tester, the location function in
tracking_lib used by Tester is currently
2D (in the xy plane) only. 

Both JSON and DAT formats are used. If the file extension is .json (ignoring case),
it is treated as a JSON file, otherwise it is assumed to be DAT.

# Input files:

Faker needs 4 input files (see examples in __sample\_inputs/__). 

1. Configuration file (JSON ONLY) __in\_fakerconfig.json__
2. Beacons input file (JSON or DAT) (see __in\_beacons.json__ or __in\_beacons.dat__ )
3. Beacon times input file (JSON or DAT) (see __in\_times.json__ or  __in\_times.dat__ )
4. Route input file (DAT) (see __in\_txyz\_route.dat__)


## 1. Configuration file __in\_fakerconfig.json__ :

This is a single JSON object with properties:

* __inBeaconFile__    : (_String_)   Name of the beacons input file (JSON or DAT).  
* __inTimesFile__     : (_String_)   Name of the beacon times input file (JSON or DAT).
* __inRouteFile__     : (_String_)   Name of the route input file (JSON or DAT).
* __outEventsFile__   : (_String_)   Name of the events output file (JSON or DAT).
* __ticks__           : (_Double_)   Number of timeline ticks per time unit.

If the time unit is seconds, and timestamp is
in milliseconds, then __ticks__ = 1000. 

## 2. Beacons input file ( e.g. __in\_beacons.json__ or __in\_beacons.dat__ ) :

Has the following data for each beacon:

* __xyz__        : (_3Vector_)  Beacon position.
* __hash__       : (_Int64_)    Beacon unique ID
* __TXpower__    : (_Double_)   Beacon emission power.
* __damp__       : (_Double_)   Beacon damping parameter.

__hash__ can be replaced by a String __MACaddress__  in the form "01:17:C5:5D:16:5A", in JSON input file only. 
_3Vector_ is written as [x, y, z], where x, y, z are Doubles. 
Note: the beacons data is generated by calibration, in the future it will be somehow connnected to indoor-tool.

JSON file format:

[ beacon1, beacon2, ... ]

DAT file format, one line/beacon:

__x__ __y__ __z__ __hash__ __TXpower__ __damp__


## 3. Beacon times file (e.g. __in\_times.json__ or  __in\_times.json__ ) :

It has the following data for each beacon:

* __hash__       : (_Int64_)    Beacon unique ID (or String __MACaddress__  in JSON only)
* __t1__         : (_Double_)   Beacon first event time (start time)
* __t2__         : (_Double_)   Beacon end time
* __period__     : (_Double_)   Beacon period (time interval between events)

Important: Tester assumes that the timestamp of the first event corresponds to the time
of the first polyline route point. Thus if you want correct comparison of the results, make sure
that the time of the first event (The lowest __t1__ of all beacons, usually 0.0)
coincides with the time __t__ of the start of the polyline route.

JSON file format:

[ btime1, btime2, ... ]

DAT file format, one line/btime:

__hash__  __t1__ __t2__ __period__ 


## 4. Route input file (DAT) (see __in\_txyz\_route.dat__)

This is a simple DAT file which specifies the polyline route. Its format is

__t0__  __x0__  __y0__  __z0__

__t1__  __x1__  __y1__  __z1__

...

__tn-1__  __xn-1__  __yn-1__  __zn-1__

# Output file (__out\_event.json__ or  __out\_event.dat__):


The output file contains measurement events (RSSI and beacon hash) vs timestamp,
see. This output file is the input file for Tester.